/**
 ***********************************************************************************************************************
 * @file           : timeSerive.c
 * @brief          : 时间服务类
 * @author         : 李嘉豪
 * @date           : 2025-04-29
 ***********************************************************************************************************************
 * @attention
 *
 * 用于提供全局可访问的时间服务
 *
 ***********************************************************************************************************************
 **/




/* ------- includes --------------------------------------------------------------------------------------------------*/

#include "time-service.h"




/* ------- typedef ---------------------------------------------------------------------------------------------------*/





/* ------- define ----------------------------------------------------------------------------------------------------*/





/* ------- macro -----------------------------------------------------------------------------------------------------*/





/* ------- function prototypes ---------------------------------------------------------------------------------------*/

void delayUWithSyst(uint32_t u);
void delayMWithSyst(uint32_t m);
void delaySWithSyst(uint32_t s);




/* ------- variables -------------------------------------------------------------------------------------------------*/

TimeServIntfTypeDef timeServIntf = {
    .delayUs  = delayUWithSyst,
    .delayMs  = delayMWithSyst,
    .delaySec = delaySWithSyst,
};




/* ------- function implement ----------------------------------------------------------------------------------------*/


void delayUWithSyst(uint32_t u) { systIntf.systDelayClkCycles(72 * u); }

void delayMWithSyst(uint32_t m) {
    while (m--) {
        delayUWithSyst(1000);
    }
}

void delaySWithSyst(uint32_t s) {
    while (s--) {
        delayMWithSyst(1000);
    }
}
